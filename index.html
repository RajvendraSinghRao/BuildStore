<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Build Shop</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family: Arial, sans-serif; background: #f5f6fa; overflow-x: hidden; }

  /* Hamburger */
  .hamburger { position: fixed; top: 15px; left: 15px; font-size: 30px; cursor: pointer; z-index: 1002; color: #2d3436; }

  /* Sidebar */
  .sidebar { position: fixed; top:0; left:-260px; width:250px; height:100%; background:#2d3436; color:#fff; padding:80px 20px 20px 20px; transition:left 0.3s; z-index:1000; display:flex; flex-direction:column; }
  .sidebar h2 { margin-bottom:20px; color:#00cec9; margin-top:0; }
  .sidebar button { padding:12px; margin-bottom:15px; background:#636e72; border:none; color:#fff; font-size:16px; cursor:pointer; border-radius:5px; transition:background 0.3s; }
  .sidebar button:hover { background:#b2bec3; color:#2d3436; }

  /* Overlay */
  .overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:none; z-index:900; }

  /* Main content */
  .main { padding:20px; margin-left:0; transition:margin-left 0.3s; }
  .main h2 { text-align:center; margin-bottom:30px; color:#2d3436; }

  /* Product Grid */
  .products { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; }
  .product-card { background:#fff; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1); padding:15px; display:flex; flex-direction:column; justify-content:space-between; transition:transform 0.3s; text-align:center; }
  .product-card:hover { transform:translateY(-5px); }
  .product-card img { max-width:100%; height:150px; object-fit:cover; border-radius:10px; margin-bottom:10px; }
  .product-card h3 { margin-bottom:10px; color:#2d3436; }
  .product-card p { margin-bottom:15px; color:#636e72; font-weight:bold; }
  .product-card button { padding:10px; background:#00b894; color:#fff; border:none; border-radius:5px; cursor:pointer; font-weight:bold; transition:background 0.3s; }
  .product-card button:hover { background:#019875; }

  /* Forms */
  form { background:#fff; padding:25px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1); max-width:600px; margin:20px auto; }
  form div { margin-bottom:15px; }
  form label { font-weight:bold; display:block; margin-bottom:5px; color:#2d3436; }
  form input, form textarea, form select { width:100%; padding:10px; border-radius:5px; border:1px solid #dfe6e9; }
  form button { background:#0984e3; color:#fff; padding:12px; border:none; border-radius:5px; cursor:pointer; font-weight:bold; width:100%; }
  form button:hover { background:#0652dd; }
</style>
</head>
<body>

<div class="hamburger" onclick="openSidebar()">&#9776;</div>

<div class="sidebar" id="sidebar">
  <h2>Build Shop</h2>
  <button onclick="openHome()">Home</button>
  <button onclick="showSellForm()">Sell Your Product</button>
</div>

<div class="overlay" id="overlay" onclick="closeSidebar()"></div>

<div class="main" id="mainContent">
  <h2>Build Shop</h2>
  <div class="products" id="productsContainer"></div>
</div>

<script>
// Sidebar toggle
function openSidebar(){
  document.getElementById('sidebar').style.left = '0';
  document.getElementById('overlay').style.display = 'block';
}
function closeSidebar(){
  document.getElementById('sidebar').style.left = '-260px';
  document.getElementById('overlay').style.display = 'none';
}
function openHome(){
  displayProducts();
  closeSidebar();
}

// Products with images and seller WhatsApp numbers
const products = [
  { name: "Bricks", price: 5, unit: "per unit", img: "https://i.imgur.com/8aFQkJ6.jpg", sellerNumber: "917977523959" },
  { name: "Cement", price: 350, unit: "per bag", img: "https://i.imgur.com/jt5eV9G.jpg", sellerNumber: "917977523960" },
  { name: "Sand", price: 50, unit: "per bag", img: "https://i.imgur.com/H4p6XvH.jpg", sellerNumber: "917977523961" },
  { name: "Paint", price: 500, unit: "per liter", img: "https://i.imgur.com/fCjVdpQ.jpg", sellerNumber: "917977523962" }
];

function displayProducts(){
  document.getElementById('mainContent').innerHTML = `<h2>Build Shop</h2><div class="products" id="productsContainer"></div>`;
  const container = document.getElementById('productsContainer');
  products.forEach(p => {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `<img src="${p.img}" alt="${p.name}">
                      <h3>${p.name}</h3>
                      <p>Price: ${p.price} ${p.unit}</p>
                      <button onclick="goToBuyerPage('${p.name}',${p.price},'${p.sellerNumber}')">Buy Now</button>`;
    container.appendChild(card);
  });
}

// Redirect to buyer form page with seller number
function goToBuyerPage(name, price, sellerNumber){
  window.location.href = `buy.html?product=${encodeURIComponent(name)}&price=${encodeURIComponent(price)}&seller=${sellerNumber}`;
}

// Seller Form
function showSellForm(){
  closeSidebar();
  document.getElementById('mainContent').innerHTML=` 
    <h2>Sell Your Product</h2>
    <form id="sellForm">
      <div><label>Select Product</label>
        <select id="category" required>
          <option value="">Select</option>
          <option>Bricks</option>
          <option>Cement</option>
          <option>Sand</option>
          <option>Stones</option>
          <option>Paint</option>
          <option>Gypsum</option>
          <option>Other</option>
        </select>
      </div>
      <div id="otherProductDiv" style="display:none;"><label>Product Name</label><input type="text" id="productName"></div>
      <div><label>Price</label><input type="number" id="price" required></div>
      <div><label>Minimum Quantity</label><input type="number" id="minQty" required></div>
      <div><label>Delivery Charge per km</label><input type="number" id="deliveryCharge" required></div>
      <div><label>Seller Name</label><input type="text" id="sellerName" required></div>
      <div><label>Contact</label><input type="tel" id="sellerContact" required></div>
      <div><label>Shop Address</label><textarea id="shopAddress" required></textarea></div>
      <div><label>Additional Details</label><textarea id="additionalDetails"></textarea></div>
      <button type="submit">Submit Product Details</button>
    </form>
  `;

  const categorySelect = document.getElementById('category');
  const otherDiv = document.getElementById('otherProductDiv');

  categorySelect.addEventListener('change', function(){
    if(this.value === "Other"){
      otherDiv.style.display = "block";
      document.getElementById('productName').required = true;
    } else {
      otherDiv.style.display = "none";
      document.getElementById('productName').required = false;
    }
  });

  document.getElementById('sellForm').addEventListener('submit', function(e){
    e.preventDefault();

    const category = document.getElementById('category').value;
    let productName = category;
    if(category === "Other"){
      productName = document.getElementById('productName').value;
    }

    const price = document.getElementById('price').value;
    const minQty = document.getElementById('minQty').value;
    const deliveryCharge = document.getElementById('deliveryCharge').value;
    const sellerName = document.getElementById('sellerName').value;
    const sellerContact = document.getElementById('sellerContact').value;
    const shopAddress = document.getElementById('shopAddress').value;
    const additionalDetails = document.getElementById('additionalDetails').value;

    const message = `New Product Submission:
Product: ${productName}
Price: ${price}
Min Qty: ${minQty}
Delivery Charge/km: ${deliveryCharge}
Seller: ${sellerName}
Contact: ${sellerContact}
Address: ${shopAddress}
Details: ${additionalDetails}`;

    const phoneNumber = sellerContact.startsWith("91") ? sellerContact : "91"+sellerContact;
    const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;

    window.open(url, "_blank"); // opens WhatsApp
  });
}

displayProducts();
</script>
</body>
</html>
