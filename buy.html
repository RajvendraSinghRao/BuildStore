<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buy Product</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f6fa; margin:0; padding:0; }
  h2 { text-align:center; margin:30px 0; color:#2d3436; }
  form { max-width:600px; margin:0 auto 50px; background:#fff; padding:30px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
  form div { margin-bottom:15px; }
  form label { font-weight:bold; display:block; margin-bottom:5px; color:#2d3436; }
  form input, form textarea { width:100%; padding:10px; border-radius:5px; border:1px solid #dfe6e9; font-size:16px; box-sizing:border-box;}
  form button { background:#0984e3; color:#fff; padding:12px; border:none; border-radius:5px; cursor:pointer; font-weight:bold; width:100%; font-size:16px;}
  form button:hover { background:#0652dd; }
</style>
</head>
<body>

<h2>Submit Your Order</h2>

<form id="buyForm">
  <input type="text" name="Product" id="product" placeholder="Product" readonly />
  <input type="text" name="Price" id="price" placeholder="Price" readonly />
  <input type="text" name="Buyer_Name" id="buyerName" placeholder="Enter your name" required />
  <input type="tel" name="Contact" id="buyerContact" placeholder="Mobile number" required pattern="[0-9]{10}" />
  <input type="tel" name="Alternate_Contact" id="buyerAltContact" placeholder="Alternate number" />
  <input type="email" name="Email" id="buyerEmail" placeholder="Email" required />
  <textarea name="Delivery_Address" id="buyerAddress" placeholder="Delivery Address" required></textarea>
  <input type="number" name="Quantity" id="buyerQty" placeholder="Quantity" required min="1" />
  <button type="submit">Submit Order</button>
</form>

<script>
const form = document.getElementById("buyForm");

// Fill product and price from URL query parameters
const params = new URLSearchParams(window.location.search);
document.getElementById('product').value = params.get('product') || '';
document.getElementById('price').value = params.get('price') || '';

form.addEventListener("submit", function(e) {
  e.preventDefault();

  const formData = new FormData(form);

  fetch("https://script.google.com/macros/s/AKfycbyRHyHmGiRQt0Tp5rBQTiHK4YnbczAIY-pKZYeQf84gkGzodMn3D9J1zQ4fFMVL4tb7/exec", { // Replace with your deployed Apps Script URL
    method: "POST",
    body: formData
  })
  .then(response => response.text())
  .then(text => {
    if(text === "Success") {
      alert("Order submitted successfully!");
      form.reset();
      window.location.href = "index.html";
    } else {
      alert("Error: " + text);
    }
  })
  .catch(error => {
    alert("Error submitting order.");
    console.error(error);
  });
});
</script>

</body>
</html>

