<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buy Product - Build Shop</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f6fa; margin:0; padding:0; }
  h2 { text-align: center; margin: 30px 0; color: #2d3436; }
  form {
    max-width: 600px;
    margin: 0 auto 50px auto;
    background: #fff;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  form div { margin-bottom: 15px; }
  form label { font-weight: bold; display: block; margin-bottom: 5px; color: #2d3436; }
  form input, form textarea { width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #dfe6e9; font-size: 16px; }
  form button { background: #0984e3; color: #fff; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; width: 100%; font-size: 16px; }
  form button:hover { background: #0652dd; }
</style>
</head>
<body>

<h2>Submit Your Order</h2>

<form id="buyForm">
  <div>
    <label>Product</label>
    <input type="text" id="product" readonly>
  </div>
  <div>
    <label>Price</label>
    <input type="text" id="price" readonly>
  </div>
  <div>
    <label>Buyer Name</label>
    <input type="text" id="buyerName" placeholder="Enter your full name" required>
  </div>
  <div>
    <label>Contact</label>
    <input type="tel" id="buyerContact" placeholder="Enter your mobile number" required>
  </div>
  <div>
    <label>Alternate Contact</label>
    <input type="tel" id="buyerAltContact" placeholder="Alternate number">
  </div>
  <div>
    <label>Email</label>
    <input type="email" id="buyerEmail" placeholder="Email" required>
  </div>
  <div>
    <label>Delivery Address</label>
    <textarea id="buyerAddress" placeholder="Enter full delivery address" required></textarea>
  </div>
  <div>
    <label>Quantity</label>
    <input type="number" id="buyerQty" placeholder="Enter quantity" required min="1">
  </div>
  <button type="submit">Submit Order</button>
</form>

<script>
  // Get product and price from URL
  const params = new URLSearchParams(window.location.search);
  document.getElementById('product').value = params.get('product') || '';
  document.getElementById('price').value = params.get('price') || '';

  // Submit form
  document.getElementById('buyForm').addEventListener('submit', async function(e) {
    e.preventDefault();

    const data = {
      Product: document.getElementById('product').value,
      Price: document.getElementById('price').value,
      Buyer_Name: document.getElementById('buyerName').value,
      Contact: document.getElementById('buyerContact').value,
      Alternate_Contact: document.getElementById('buyerAltContact').value,
      Email: document.getElementById('buyerEmail').value,
      Delivery_Address: document.getElementById('buyerAddress').value,
      Quantity: document.getElementById('buyerQty').value
    };

    const scriptURL = "https://script.google.com/macros/s/AKfycbyRHyHmGiRQt0Tp5rBQTiHK4YnbczAIY-pKZYeQf84gkGzodMn3D9J1zQ4fFMVL4tb7/exec"; // replace with Apps Script Web App URL

    try {
      const res = await fetch(scriptURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      if (result.status === "success") {
        alert("Order submitted successfully!");
        window.location.href = "index.html";
      } else {
        alert("Error: " + result.message);
      }
    } catch (err) {
      alert("Error: " + err);
    }
  });
</script>

</body>
</html>
