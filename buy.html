<form id="buyForm">
  <input type="text" id="product" readonly>
  <input type="text" id="price" readonly>
  <input type="text" id="buyerName" required>
  <input type="tel" id="buyerContact" required>
  <input type="tel" id="buyerAltContact">
  <input type="email" id="buyerEmail">
  <textarea id="buyerAddress" required></textarea>
  <input type="number" id="buyerQty" required>
  <button type="submit">Submit</button>
</form>

<script>
const params = new URLSearchParams(window.location.search);
document.getElementById('product').value = params.get('product') || '';
document.getElementById('price').value = params.get('price') || '';

document.getElementById('buyForm').addEventListener('submit', e => {
  e.preventDefault();
  const data = {
    Product: document.getElementById('product').value,
    Price: document.getElementById('price').value,
    Buyer_Name: document.getElementById('buyerName').value,
    Contact: document.getElementById('buyerContact').value,
    Alternate_Contact: document.getElementById('buyerAltContact').value,
    Email: document.getElementById('buyerEmail').value,
    Delivery_Address: document.getElementById('buyerAddress').value,
    Quantity: document.getElementById('buyerQty').value
  };

  fetch("https://script.google.com/macros/s/AKfycbwDbqisu-fChK-GTWeN9vHN8wcu-H5zAQ4CdH_ZfXAxh_TWoxO33VgFytriIsW3sUIYIw/exec", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(res => {
    if(res.status === "success") alert("Order saved!");
    else alert("Error: " + res.message);
  })
  .catch(err => alert("Error: " + err));
});
</script>
